#!/usr/bin/env bash

set -e

readonly PARENT_DIR=$(cd $(dirname "${BASH_SOURCE[0]}") && pwd -P)
readonly LOCALENV_DIR=$(cd $(dirname "$PARENT_DIR") && pwd -P)

readonly BIN_DIR=$LOCALENV_DIR/bin

source $BIN_DIR/utils/shell-helpers.sh

# Main function
main() {
  echo_yellow "Initializing localenv..."

  # Initialize network
  $BIN_DIR/globals/init-docker-network

  # Initialize databases
  $BIN_DIR/globals/init-global-databases

  # Initialize cache
  $BIN_DIR/globals/init-global-cache

  # Initialize repos
  $BIN_DIR/repos/clone-repos
  $BIN_DIR/repos/init-repos

  echo_green "localenv successfully initialized!\n"
}

main
